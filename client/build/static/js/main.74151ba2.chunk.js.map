{"version":3,"sources":["components/Hero.js","state.js","components/Card.js","components/CardGrid.js","components/GoBackButton.js","pages/Home.js","pages/UserChats.js","pages/Chat.js","App.js","index.js"],"names":["Hero","_ref","title","subtitle","children","react_default","a","createElement","className","state","proxy","users","userChats","currentUserId","currentChatId","Card","id","email","button","route","alt","src","react_router_dom","to","concat","onClick","setCurrentUser","setCurrentChat","CardGrid","GoBackButton","history","useNavigate","index_esm","Home","snap","useSnapshot","getUsers","Object","asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","fetch","sent","json","data","stop","apply","this","arguments","useEffect","components_Hero","components_CardGrid","length","map","user","components_Card","key","_id","name","UserChats","getChats","UserChats_regeneratorRuntime","chats","_x","components_GoBackButton","chat","react_router","socket","io","Message","_ref3","text","direction","style","width","TextInput","_ref4","onChange","value","onKeyDown","type","placeholder","Chat","_useState","useState","_useState2","slicedToArray","chatInfo","setChatInfo","_useState3","_useState4","chatMessages","setChatMessages","_useState5","_useState6","messageToSend","setMessageToSend","messagesEnd","useRef","getChat","Chat_regeneratorRuntime","sendMessage","_ref2","_callee2","fullMessage","_context2","message","method","headers","Content-Type","body","JSON","stringify","on","prevArray","toConsumableArray","current","scrollIntoView","behavior","Chat_Message","Chat_TextInput","e","target","handleChange","keyCode","handleEnter","ref","App","path","element","pages_Home","pages_UserChats","pages_Chat","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.74151ba2.chunk.js","sourcesContent":["import React from 'react';\n\nconst Hero = ({ title, subtitle, children }) => {\n\treturn (\n\t\t<main className=\"bg-base-100 w-full m-0 p-12 flex flex-col items-center rounded shadow-md\">\n\t\t\t<p className=\"text-4xl font-bold m-4\">{title}</p>\n\t\t\t<p className=\"text-1xl font-bold m-4\">{subtitle}</p>\n\t\t\t{children}\n\t\t</main>\n\t);\n};\n\nexport default Hero;\n","import { proxy } from 'valtio';\n\nconst state = proxy({\n\tusers: [],\n\tuserChats: [],\n\tcurrentUserId: '',\n\tcurrentChatId: '',\n});\n\nexport { state };\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { state } from '../state';\n\nconst Card = ({ id, title, email, button, route }) => {\n\tconst setCurrentUser = (id) => {\n\t\tstate.currentUserId = id;\n\t};\n\n\tconst setCurrentChat = (id) => {\n\t\tstate.currentChatId = id;\n\t};\n\n\treturn (\n\t\t<div className=\"card text-center shadow-md bg-white\">\n\t\t\t<figure className=\"px-2 pt-2\">\n\t\t\t\t<img\n\t\t\t\t\talt=\"Profile\"\n\t\t\t\t\tsrc=\"https://picsum.photos/id/1005/400/250\"\n\t\t\t\t\tclassName=\"rounded-xl\"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t<div className=\"card-body\">\n\t\t\t\t<h2 className=\"card-title\">{title}</h2>\n\t\t\t\t<p>{email}</p>\n\t\t\t\t<div className=\"justify-center card-actions\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={`/${route}`}\n\t\t\t\t\t\tclassName=\"btn btn-outline border-2 btn-primary btn-block\"\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\troute === 'user' ? setCurrentUser(id) : setCurrentChat(id)\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{button}\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Card;\n","import React from 'react';\n\nconst CardGrid = ({ children }) => {\n\treturn (\n\t\t<section className=\"grid gap-3 xl:gap-5 w-full grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6\">\n\t\t\t{children}\n\t\t</section>\n\t);\n};\n\nexport default CardGrid;\n","import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { IoIosArrowBack } from 'react-icons/io';\n\nconst GoBackButton = () => {\n\tconst history = useNavigate();\n\n\treturn (\n\t\t<button className=\"btn fixed left-12 z-10\" onClick={() => history(-1)}>\n\t\t\t<div className=\"text-accent text-xl\">\n\t\t\t\t<IoIosArrowBack />\n\t\t\t</div>\n\t\t\tGo back\n\t\t</button>\n\t);\n};\n\nexport default GoBackButton;\n","import React, { useEffect } from 'react';\n//Components\nimport { Hero, Card, CardGrid } from '../components';\n\n// State\nimport { state } from '../state';\nimport { useSnapshot } from 'valtio';\n\nconst Home = () => {\n\tconst snap = useSnapshot(state);\n\n\tconst getUsers = async () => {\n\t\tconst users = await (await fetch('/api/user')).json();\n\t\tstate.users = users.data;\n\t};\n\n\tuseEffect(() => {\n\t\tgetUsers();\n\t}, []);\n\n\treturn (\n\t\t<Hero title=\"WELCOME TO MY MESSAGE APP\" subtitle=\"USERS:\">\n\t\t\t<CardGrid>\n\t\t\t\t{snap.users.length &&\n\t\t\t\t\tsnap.users.map((user) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tkey={user._id}\n\t\t\t\t\t\t\t\tid={user._id}\n\t\t\t\t\t\t\t\ttitle={user.name}\n\t\t\t\t\t\t\t\temail={user.email}\n\t\t\t\t\t\t\t\tbutton=\"Select User\"\n\t\t\t\t\t\t\t\troute=\"user\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</CardGrid>\n\t\t</Hero>\n\t);\n};\n\nexport default Home;\n","import React, { useEffect } from 'react';\nimport { Navigate } from 'react-router-dom';\n// Components\nimport { Hero, Card, CardGrid, GoBackButton } from '../components';\n\n// State\nimport { state } from '../state';\nimport { useSnapshot } from 'valtio';\n\nconst UserChats = () => {\n\tconst snap = useSnapshot(state);\n\n\t// Get all the chats that an user has\n\tconst getChats = async (id) => {\n\t\tstate.userChats = [];\n\t\tconst chats = await (await fetch(`/api/chat/${id}`)).json();\n\t\tstate.userChats = chats.data;\n\t};\n\n\tuseEffect(() => {\n\t\tconst id = snap.currentUserId;\n\t\tgetChats(id);\n\t}, [snap.currentUserId]);\n\n\t// Redirection\n\tif (!snap.currentUserId) {\n\t\treturn <Navigate to=\"/\" />;\n\t}\n\n\treturn (\n\t\t<Hero>\n\t\t\t<GoBackButton />\n\t\t\t<CardGrid>\n\t\t\t\t{snap.userChats &&\n\t\t\t\t\tsnap.userChats.map((chat) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tkey={chat._id}\n\t\t\t\t\t\t\t\tid={chat._id}\n\t\t\t\t\t\t\t\tbutton=\"Let's chat\"\n\t\t\t\t\t\t\t\troute=\"chat\"\n\t\t\t\t\t\t\t\ttitle={`Chat with ${\n\t\t\t\t\t\t\t\t\tchat.users[0]._id === snap.currentUserId\n\t\t\t\t\t\t\t\t\t\t? chat.users[1].name\n\t\t\t\t\t\t\t\t\t\t: chat.users[0].name\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</CardGrid>\n\t\t</Hero>\n\t);\n};\n\nexport default UserChats;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Navigate } from 'react-router-dom';\n// SocketIO\nimport { io } from 'socket.io-client';\n\n// Components\nimport { GoBackButton } from '../components';\n\n// State\nimport { state } from '../state';\nimport { useSnapshot } from 'valtio';\n\nconst socket = io();\n\nconst Chat = () => {\n\tconst snap = useSnapshot(state);\n\tconst [chatInfo, setChatInfo] = useState();\n\tconst [chatMessages, setChatMessages] = useState([]);\n\tconst [messageToSend, setMessageToSend] = useState('');\n\n\tconst messagesEnd = useRef();\n\n\t// Scroll to the bottom of the messages\n\tconst scrollToBottom = () => {\n\t\tif (snap.currentUserId && snap.currentChatId) {\n\t\t\tmessagesEnd.current.scrollIntoView({ behavior: 'smooth' });\n\t\t}\n\t};\n\n\t// Send a message when the user press the Enter key\n\tconst handleEnter = (e) => {\n\t\tif (e.keyCode === 13) {\n\t\t\t//// console.log('Enter pressed');\n\t\t\tsendMessage();\n\t\t}\n\t};\n\n\t// Get all the data from the chat\n\tconst getChat = async (id) => {\n\t\tsetChatMessages([]);\n\t\tconst chatInfo = await (await fetch(`/api/chat/${id}`)).json();\n\t\tsetChatInfo(chatInfo.data[0]);\n\t\tconst chatMessages = await (await fetch(`/api/message?chat=${id}`)).json();\n\t\tsetChatMessages(chatMessages.data);\n\t};\n\n\t// Functions to send a message\n\tconst handleChange = (e) => {\n\t\tsetMessageToSend(e.target.value);\n\t};\n\n\tconst sendMessage = async () => {\n\t\tif (messageToSend) {\n\t\t\tconst fullMessage = {\n\t\t\t\tchat: snap.currentChatId,\n\t\t\t\tuser: snap.currentUserId,\n\t\t\t\tmessage: messageToSend,\n\t\t\t};\n\n\t\t\tawait fetch('/api/message', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=UTF-8',\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(fullMessage),\n\t\t\t});\n\t\t\tsetMessageToSend('');\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\t// Get Chats\n\t\tconst id = snap.currentChatId;\n\t\tgetChat(id);\n\n\t\t// Listen for new messages\n\t\tsocket.on(`${id}`, (data) => {\n\t\t\tsetChatMessages((prevArray) => [...prevArray, data]);\n\t\t});\n\t}, [snap.currentChatId]);\n\n\tuseEffect(() => {\n\t\t// Scroll to the bottom view\n\t\tscrollToBottom();\n\t}, [chatMessages]);\n\n\t// Redirection\n\tif (!snap.currentUserId) {\n\t\treturn <Navigate to=\"/\" />;\n\t}\n\n\tif (!snap.currentChatId) {\n\t\treturn <Navigate to=\"/user\" />;\n\t}\n\n\treturn (\n\t\t<main className=\"w-full min-h-screen flex justify-center items-center md:text-2xl\">\n\t\t\t<section className=\"card shadow rounded-none bg-white w-full md:w-4/5 md:rounded-2xl md:my-4 lg:px-12\">\n\t\t\t\t<div className=\"card-body \">\n\t\t\t\t\t<GoBackButton />\n\t\t\t\t\t<h2 className=\"card-title\">\n\t\t\t\t\t\t{chatInfo\n\t\t\t\t\t\t\t? chatInfo.users[0]._id === snap.currentUserId\n\t\t\t\t\t\t\t\t? chatInfo.users[1].name\n\t\t\t\t\t\t\t\t: chatInfo.users[0].name\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</h2>\n\t\t\t\t\t{chatMessages &&\n\t\t\t\t\t\tchatMessages.map((message) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t\tkey={message._id}\n\t\t\t\t\t\t\t\t\tuser={message.user.name}\n\t\t\t\t\t\t\t\t\ttext={message.message}\n\t\t\t\t\t\t\t\t\tdirection={\n\t\t\t\t\t\t\t\t\t\tmessage.user._id === snap.currentUserId ? 'right' : 'left'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tvalue={messageToSend}\n\t\t\t\t\t\tonChange={(e) => handleChange(e)}\n\t\t\t\t\t\tonClick={() => sendMessage()}\n\t\t\t\t\t\tonKeyDown={(e) => handleEnter(e)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div ref={messagesEnd}></div>\n\t\t\t</section>\n\t\t</main>\n\t);\n};\n\nconst Message = ({ user, text, direction }) => {\n\tif (direction === 'left') {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={{ width: 'fit-content' }}\n\t\t\t\tclassName=\"card shadow my-3 bg-base-100 \"\n\t\t\t>\n\t\t\t\t<div className=\"card-body p-4 \">\n\t\t\t\t\t<h2 className=\"card-title md:text-2xl\">{user}</h2>\n\t\t\t\t\t<p>{text}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{ width: 'fit-content' }}\n\t\t\tclassName=\"card shadow my-3 w-auto bg-primary md:w-1/2 self-end\"\n\t\t>\n\t\t\t<div className=\"card-body text-right md:text-left p-4\">\n\t\t\t\t<h2 className=\"card-title md:text-2xl\">{user}</h2>\n\t\t\t\t<p>{text}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst TextInput = ({ onChange, onClick, value, onKeyDown }) => {\n\treturn (\n\t\t<div className=\"form-control mt-8 \">\n\t\t\t<div className=\"flex space-x-2 \">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\tplaceholder=\"Write something...\"\n\t\t\t\t\tclassName=\"w-full input input-primary input-bordered md:text-2xl md:h-20 md:p-10 \"\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"btn btn-neutral md:w-64 md:h-20 md:text-2xl\"\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t>\n\t\t\t\t\tSend\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Chat;\n","import React from 'react';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport Home from './pages/Home';\nimport UserChats from './pages/UserChats';\nimport Chat from './pages/Chat';\nimport './App.css';\n\nfunction App() {\n\treturn (\n\t\t<BrowserRouter>\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/\" element={<Home />} />\n\t\t\t\t<Route path=\"/user\" element={<UserChats />} />\n\t\t\t\t<Route path=\"/chat\" element={<Chat />} />\n\t\t\t</Routes>\n\t\t</BrowserRouter>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}